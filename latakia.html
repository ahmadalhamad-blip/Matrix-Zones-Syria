<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Latakia Zones â€“ Mapbox</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.6.0/mapbox-gl.css" rel="stylesheet" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.6.0/mapbox-gl.js"></script>
  <style>
    html, body { height: 100%; margin: 0; }
    #map { position: absolute; inset: 0; }
    #notebox {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.95);
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 8px 12px;
      font-family: Arial, sans-serif;
      font-size: 14px;
      font-weight: 700;
      z-index: 10;
      pointer-events: none;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    #cursorTip {
      position: absolute;
      display: none;
      pointer-events: none;
      font-family: Arial, sans-serif;
      font-size: 13px;
      background: rgba(255,255,255,0.95);
      padding: 6px 8px;
      border-radius: 4px;
      border: 1px solid #ccc;
      z-index: 11;
      transform: translate(10px,10px);
      white-space: nowrap;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <div id="notebox">Hover over a zone</div>
  <div id="cursorTip"></div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiYWhtYWQtdGVjaCIsImEiOiJjbWY5czYwcjUxaXhrMmlxczZvamlmNm5tIn0.nJnJvwt0e4etH4CvHl0iMw';

const map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/mapbox/standard',
  center: [35.79, 35.52],
  zoom: 8.5,
  projection: 'globe',
  antialias: true
});

// Latakia GeoJSON
const latakiaGeoJSON = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": { "LATAKIA_SYRIA": "LATAKIA_SYRIA" },
      "geometry": { "type": "Polygon", "coordinates": [[[35.71308957499426,35.58929866423564],[35.74083114614032,35.59944297744181],[35.75921676680028,35.60024476522585],[35.77546905030019,35.64427961870594],[35.75437223870139,35.675811060829886],[35.78987757729367,35.69543245832348],[35.84416311222279,35.62635161726236],[35.91100044204386,35.543989456533865],[35.93305181148025,35.55238910289448],[35.97603755499654,35.52792223563311],[36.01108297248449,35.513165469130016],[36.03175837991105,35.45319636756071],[36.00256351572091,35.41331951445937],[35.97438492204044,35.385565674547564],[35.91960398983078,35.383910033983966],[35.91050874806183,35.28133147594816],[35.888335993335524,35.151745744363254],[35.802287064630605,34.91792581417895],[35.98903891968198,34.52783692160196],[36.29625673914754,34.371802102518174],[35.87511983591307,33.77442476732475],[35.5809988496811,32.647194308937486],[36.54163705142767,32.12410386237158],[38.6945301834928,32.94244281134884],[41.05741716501153,34.26318478248376],[41.45663589917627,34.857670264735226],[41.52491714224033,35.386302865305495],[41.53836997244038,35.99607535525761],[41.80003621695466,36.420776808590674],[42.581099386183055,37.1577569155259],[42.31820456046717,37.413391186335204],[42.004807920766,37.1953685108456],[41.13934206616545,37.12989412505637],[40.77983686829401,37.15220417523654],[39.10053866633222,36.73582396932801],[38.28012465086532,36.97421777941592],[37.15018404337004,36.73539332489833],[36.65344558680238,36.92227282624309],[36.27892264227279,36.27404596607042],[36.010213277678275,35.98328313190683],[35.75678595294596,36.00894851114383],[35.79730106161952,35.71047887159839],[35.76584880881333,35.69446390615073],[35.74767191918768,35.68297208824064],[35.7201740944931,35.67703792868241],[35.71308957499426,35.58929866423564]]]}
    },
    {
      "type": "Feature",
      "properties": { "LATAKIA R001": "LATAKIA R001" },
      "geometry": { "type": "Polygon", "coordinates": [[[35.77838027090445,35.49204481381811],[35.91927881670449,35.38415780511454],[35.97458187047265,35.38607480963594],[36.002849346778135,35.413783064671584],[36.01523413735946,35.43135059564692],[36.0317933836976,35.45454883798129],[36.011752780706175,35.513279685840935],[35.98683417170308,35.52353372347942],[35.97489154033178,35.52904270348643],[35.93359208532682,35.55311063898496],[35.91144467194401,35.54405551806698],[35.85170082683412,35.61638203208687],[35.79024470403135,35.695337911573986],[35.754418720897476,35.676187775368376],[35.77530521642974,35.644780315541915],[35.75958979585492,35.60032786025998],[35.790481334128906,35.587163882559985],[35.796680293802495,35.57500492372293],[35.818990231152924,35.568974382147644],[35.83453745337648,35.56484535453403],[35.843946127830876,35.56378616155511],[35.86475227992578,35.56144739305715],[35.87766361783771,35.56019358322072],[35.88894270045656,35.55008327367476],[35.86916197495819,35.530552008228],[35.85086932378134,35.5105161567302],[35.81223536796941,35.498858496802356],[35.77838027090445,35.49204481381811]]]}
    },
    {
      "type": "Feature",
      "properties": { "LATAKIA CITY CENTER": "LATAKIA CITY CENTER" },
      "geometry": { "type": "Polygon", "coordinates": [[[35.77822117359838,35.49207932876415],[35.811902724225035,35.4987399964546],[35.85088816430567,35.510529295242534],[35.870656124218925,35.53222177008301],[35.88898468347574,35.55009571528873],[35.87738230109856,35.56019694512025],[35.834560530548984,35.564845767773356],[35.7966780761968,35.574942578486386],[35.79045312439797,35.58712009921082],[35.75914737535817,35.60014347727231],[35.74034125619232,35.599407133646565],[35.71259147654294,35.58896805326128],[35.76049858217064,35.505346621168414],[35.77822117359838,35.49207932876415]]]}
    }
  ]
};

// Normalize names
latakiaGeoJSON.features.forEach((f,i)=>{
  if(!f.properties) f.properties={};
  if(!('name' in f.properties)){
    const vals=Object.values(f.properties);
    f.properties.name=(vals.length&&vals[0])?String(vals[0]).trim():`zone-${i}`;
  }
  if(f.id===undefined) f.id=i;
});

map.on('load',()=>{
  map.addSource('latakia-zones',{type:'geojson',data:latakiaGeoJSON});

  map.addLayer({id:'zones-fill',type:'fill',source:'latakia-zones',paint:{'fill-color':'#0044cc','fill-opacity':0.35}});
  map.addLayer({id:'zones-outline',type:'line',source:'latakia-zones',paint:{'line-color':'#000','line-width':1.5}});
  map.addLayer({id:'zones-highlight',type:'fill',source:'latakia-zones',paint:{'fill-color':'rgba(255,255,0,0.6)','fill-opacity':0.4},filter:['==',['get','name'],'___NO_MATCH___']});

  const notebox=document.getElementById('notebox');
  const cursorTip=document.getElementById('cursorTip');

  // Percentages for each zone
  const percentages = {
    "LATAKIA CITY CENTER": "0%",
    "LATAKIA R001": "30%",
    "LATAKIA_SYRIA": "20%"
  };

  // Hover
  map.on('mousemove','zones-fill',(e)=>{
    const feat=e.features[0];
    const name=feat.properties.name||'Unnamed';
    const percent = percentages[name]||'';
    map.setFilter('zones-highlight',['==',['get','name'],name]);
    notebox.textContent = `${name}  ${percent}`;

    cursorTip.style.display='block';
    cursorTip.textContent=name;
    cursorTip.style.left=(e.point.x+12)+'px';
    cursorTip.style.top=(e.point.y+12)+'px';
    map.getCanvas().style.cursor='pointer';
  });

  map.on('mouseleave','zones-fill',()=>{
    map.setFilter('zones-highlight',['==',['get','name'],'___NO_MATCH___']);
    notebox.textContent='Hover over a zone';
    cursorTip.style.display='none';
    map.getCanvas().style.cursor='';
  });

  // Click popup
  map.on('click','zones-fill',(e)=>{
    const feat=e.features[0];
    const name=feat.properties.name||'Unnamed';
    new mapboxgl.Popup().setLngLat(e.lngLat).setHTML(`<strong>${name}</strong>`).addTo(map);
  });
});
</script>
</body>
</html>
